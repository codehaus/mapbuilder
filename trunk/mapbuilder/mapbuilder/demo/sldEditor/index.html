<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>Mapbuilder SLD Editor Prototype</title>
    <link rel='StyleSheet' type='text/css' href='../../lib/skin/default/docsStyle.css'>
    <link rel='StyleSheet' type='text/css' href='../../lib/skin/default/mapStyle.css'>
    <link rel='StyleSheet' type='text/css' href='../../lib/skin/default/button.css'>
     <link rel="stylesheet" type="text/css" href="../../lib/skin/default/tabList.css">
   
    <style type="text/css">
      #workspace {
        overflow: auto;
        position: relative;
        border: 0;
      }
    </style>
    <script>
      // URL of Mapbuilder configuration file.
      var mbConfigUrl='config.xml';
      
      function mbOnload() {
        config.objects.mainMap.addListener("loadModel",initWorkspace,null);
        window.onresize = initWorkspace;
      }
      
//Display in layercontrol if layer is visible    
     function eyeOfTiger(layerId,nb)
	{
	
		var h=document.getElementById("previewImage"+nb);
		var layer=document.getElementById(layerId);
		//alert(layer);
		if(layer&& (layer.firstChild.src.indexOf("GetMap")!=-1))
		{
					document.getElementById("previewImage"+nb).src=layer.firstChild.src;
		}
		
	}
      
      
//initialize workspace    
      function initWorkspace() {
        var pageBody = document.getElementsByTagName("body")[0];
        var workDiv = document.getElementById("workspace");
        var footerDiv = document.getElementById("mbFooter");
        if (_SARISSA_IS_IE) {
          workDiv.style.height = pageBody.offsetHeight - workDiv.offsetTop - footerDiv.offsetHeight - 30;  //20 is a fudge factor
        } else {
          workDiv.style.height = window.innerHeight - workDiv.offsetTop - footerDiv.offsetHeight - 20;  //20 is a fudge factor
        }
      }
      
//Open Popup    
      function popUp(URL) {
				day = new Date();
				id = day.getTime();
				eval("page" + id + " = window.open(URL, '" + id + "', 'toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=1,width=1260,height=140,left = 0,top=800');");
			}
			
//Show map legend when click on layerControl		
		function show(id){
	
		var temp=new Image();
	
		
	
		if(document.images["lButton"+id].src.indexOf("Disable")!=-1)
		{     
			document.images["lButton"+id].src="../../lib/skin/default/images/LegendEnable.png";
			document.getElementById("div"+id).style.width="40px";
			document.getElementById("div"+id).style.height="40px";
			document.getElementById("div"+id).style.visibility = "visible";
			/*document.images["legend"+id].src="http://www.geomatys.fr:8080/geoserver/wms/GetLegendGraphic?VERSION=1.0.0&FORMAT=image/png&WIDTH=40&HEIGHT=40&LAYER="+id;*/
			
		}
		else
		{
			document.images["lButton"+id].src="../../lib/skin/default/images/LegendDisable.png";
			document.getElementById("div"+id).style.visibility = "hidden";
			document.getElementById("div"+id).style.width="0px";
			document.getElementById("div"+id).style.height="0px";
		}
		
		
	}
	var cptOthers;


//Open popup for choose color
	function openColorWindow(inputId)
	{
		var URL=new String("color.html?inputId="+inputId);
		day = new Date();
		id = day.getTime();
		eval("page" + id + " = window.open(URL, '" + id + "', 'toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=1,width=340,height=340,left =200,top=200');");
			
	}
	
//Update input of color		
	function setColor(hexColor,inputId)
	{
		document.getElementById(inputId).value="#"+hexColor;
		document.getElementById(inputId).focus();
	}
    </script>


    <script type="text/javascript" src="../../lib/Mapbuilder.js"></script> 
<!--    <script type="text/javascript" src="../../lib/util/ManageDiv.js"></script>-->
  </head>
  <body onload="mbDoLoad(mbOnload);">
    <table style="width:800">
      <tr>
        <td colspan="2">
          <h1><a href="http://mapbuilder.sourceforge.net">MapBuilder</a> SLD Editor</h1>
        </td>
      </tr>
      <tr>
        <td valign="top" style="padding:8px; width:200">
<table>
            <tr><td id="urlInputWfs"></td></tr>
             <tr><td id="urlInputWms"></td>
<!--             <td><a href="" id="modelUrl">-->
<!--Apply WMC-->
<!--</a></td>-->
</tr>
            <tr>
              <td align="left" id="tabBar">
              </td>
            </tr>
            <tr>
            
              <td align="left">
                <div id="workspace"></div>
                <div id="loadAllLayers"/>
              </td>
            </tr>
       </table>     
        </td>
        <td style="width:600">
          <table width="100%">
            <tr>
              <td>
                <h2 id="mapTitle"></h2>
              </td>
            </tr>
            <tr>
              <td align="center">
                <table>
                  <tr>
                    <td colspan="2">
                      <div id="mainMapPane"/>
                    </td>
                  </tr>
                  <tr>
                    <td align="left">
                      <div id="mainButtonBar"/>
                    </td>
                    <td align="right" id="cursorTrack" />
                    
                  </tr>
                </table>
              </td>
            </tr>
            
          </table>
         </td>
      </tr>

      <tr>
        <td colspan="2" class="footer" id="mbFooter">
          <img src="../lib/skin/default/images/Icon.gif" style="float:right"/>
          <a href="http://mapbuilder.sourceforge.net">Community Map Builder</a><br/>$Name$
        </td>
      </tr>
    </table>
    

  </body>
</html>
