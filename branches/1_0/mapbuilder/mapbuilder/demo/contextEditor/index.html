<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>Mapbuilder Context Editor Prototype</title>
    <link rel='StyleSheet' type='text/css' href='../../lib/skin/default/docsStyle.css'>
    <link rel='StyleSheet' type='text/css' href='../../lib/skin/default/mapStyle.css'>
    <link rel='StyleSheet' type='text/css' href='../../lib/skin/default/button.css'>
    <link rel='StyleSheet' type='text/css' href='contextEditor.css'>
    <style type="text/css">
      #workspace {
        overflow: auto;
        position: relative;
        border: 0;
      }
    </style>
    <script>
      // URL of Mapbuilder configuration file.
      var mbConfigUrl='contextEditor.xml';
      
      function mbOnload() {
        config.objects.mainMap.addListener("loadModel",initWorkspace,null);
        window.onresize = initWorkspace;
      }
      
      function initWorkspace() {
        var pageBody = document.getElementsByTagName("body")[0];
        var workDiv = document.getElementById("workspace");
        var footerDiv = document.getElementById("mbFooter");
        if (_SARISSA_IS_IE) {
          workDiv.style.height = pageBody.offsetHeight - workDiv.offsetTop - footerDiv.offsetHeight - 30;  //20 is a fudge factor
        } else {
          workDiv.style.height = window.innerHeight - workDiv.offsetTop - footerDiv.offsetHeight - 20;  //20 is a fudge factor
        }
      }
    </script>
    <script type="text/javascript" src="../../lib/Mapbuilder.js"></script>
  </head>
  <body onload="mbDoLoad(mbOnload)">
    <table style="width:800">
      <tr>
        <td colspan="2">
          <h1><a href="http://mapbuilder.sourceforge.net">MapBuilder</a> Context Editor</h1>
        </td>
      </tr>
      <tr>
        <td valign="top" style="padding:8px; width:200">
          <div>
            <div id="locatorMap"/>
          </div>
            <a href="javascript:config.loadModel('myMapCollection','../data/context/demoCollection.xml')">
            Map collection</a><br/>
            <a href="javascript:config.loadModel('wmsServers','http://geodiscover.cgdi.ca/ceonetWeb/biz?request=searchForService&language=en&levelOfDetail=brief&serviceType=CgdiMapServices&numResultsPerPage=10&page=1')">
            Browse WMS servers</a><br/>
            <a href="javascript:config.loadModel('wfsServers','http://geodiscover.cgdi.ca/ceonetWeb/biz?request=searchForService&language=en&levelOfDetail=brief&serviceType=CgdiFeatureServices&numResultsPerPage=10&page=1')">
            Browse WFS servers</a><br/>
            <a href="javascript:config.paintWidget(config.objects.contextLegend)">
            Map layer control</a><br/>
            <a href="javascript:config.paintWidget(config.objects.owsCatSearchForm)">
            Search form</a><br/>
            <!--a href="javascript:config.saveModel(config)">
            Save config</a><br/-->
        </td>
        <td style="width:600">
          <table width="100%">
            <tr>
              <td>
                <h2 id="mapTitle"></h2>
              </td>
            </tr>
            <tr>
              <td align="center">
                <table>
                  <tr>
                    <td colspan="2">
                      <div id="mainMapPane"/>
                    </td>
                  </tr>
                  <tr>
                    <td align="left">
                      <div id="mainButtonBar"/>
                    </td>
                    <td align="right" id="cursorTrack" />
                  </tr>
                </table>
              </td>
            </tr>
            <tr>
              <td align="left" id="tabBar">
              </td>
            </tr>
            <tr>
              <td align="left">
                <div id="workspace"></div>
              </td>
            </tr>
          </table>
         </td>
      </tr>

      <tr>
        <td colspan="2" class="footer" id="mbFooter">
          <img src="../../lib/skin/default/images/Icon.gif" style="float:right"/>
          <a href="http://mapbuilder.sourceforge.net">Community Map Builder</a><br/>$Name$
        </td>
      </tr>

    </table>
    

  </body>
</html>
